{"version":3,"sources":["/prj/user/Main.tonyu","/prj/user/Mirror.tonyu","/prj/user/MyChar.tonyu","/prj/user/WS.tonyu"],"names":[],"mappings":"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","sourcesContent":["native window;\n\nupdateEx(5);\n\nvar host = window.document.location.host.replace(/:.*/, '');\n\n$port=8888;\nif(host==\"phmobapkconpplimipcfhkkmdfiklnkh\"){\n    $connectURL=\"localhost:\"+$port;\n}else{\n    $connectURL=host+\":\"+$port;\n}\n// $InputBox.useNative=true;\n// $connectURL=$InputBox.prompt(\"URL\",host+\":58889\");\n\n$pad=new Pad{buttonCnt:4,alpha:255,active:false};\n$pad.alpha=0;\n$ws=new WS;\nnew MyChar;\n\nwhile(true){\n    if(getkey(1)==0&&$touches[0].touched==1){\n        $pad.alpha=255;\n        $pad.active=true;\n    }\n    update();\n}","\nwhile(true){\n    alpha = playerNo==$myNo ? 64 : 255;\n    drawText(x-16,y+16,playerNo+\"P\",\"rgb(255,255,255)\",16);\n    update();\n}","native JSON;\n\nox=-9999;\noy=-9999;\nx=rnd($screenWidth);\ny=rnd($screenHeight);\nalpha=255;\nwhile(true){\n    if($myNo!=null)p=$myNo-1;else p=$pat_base+11;\n    if(getkey(37)||$pad.getLeft() )x-=3;\n    if(getkey(38)||$pad.getUp()   )y-=3;\n    if(getkey(39)||$pad.getRight())x+=3;\n    if(getkey(40)||$pad.getDown() )y+=3;\n    x=clamp(0,$screenWidth,x);\n    y=clamp(0,$screenHeight,y);\n    if(x!=ox||y!=oy){\n        ox=x;\n        oy=y;\n        var o={mes:\"playerXY\",playerNo:$myNo,x,y};\n        $ws.send(JSON.stringify(o));\n    }\n    update();\n}\n\n\n","native WebSocket;\r\nnative console;\r\nnative JSON;\r\n\r\n// WebSocketAPI(JavaScript„ÅÆAPI)\r\nsock = new WebSocket(\"ws://\"+$connectURL);\r\nsock.addEventListener(\"open\", \\(e){\r\n    print(\"open\");\r\n});\r\nsock.addEventListener(\"message\", \\(e){\r\n    //print(\"message\", e.data);\r\n    recvProc(e.data);\r\n});\r\nsock.addEventListener(\"close\", \\(e){\r\n    print(\"close\");\r\n});\r\nsock.addEventListener(\"error\", \\(e){\r\n    print(\"error\");\r\n});\r\n\r\n$mirrorAry=[];\r\n\r\n\\send(d){\r\n    if (sock.readyState==1) { // WebSocket.OPEN\r\n        sock.send(d);\r\n    }\r\n}\r\n\\recvProc(d){\r\n    var obj = JSON.parse(d);\r\n    \r\n    if (obj.mes==\"_start\"){\r\n        $myNo=obj.playerNo;\r\n        print(\"myNo:\"+$myNo/*, \"playerCnt:\"+obj.playerCnt*/);\r\n        \r\n    } else if (obj.mes==\"playerXY\"){\r\n        var playerNo=obj.playerNo;\r\n        var m=$mirrorAry[playerNo-1];\r\n        if (!m) {\r\n            m=new Mirror{playerNo,x:-999,y:-999,p:playerNo-1,zOrder:10};\r\n            $mirrorAry[playerNo-1]=m;\r\n        }\r\n        m.x = obj.x;\r\n        m.y = obj.y;\r\n    }\r\n}\r\n\r\n"]}